<!DOCTYPE html>
<html lang="en" dir="ltr">
<link rel="stylesheet" href="SIMULATOR.css">

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>


<body>

    <h1 style="color: rgb(0, 47, 90);">
        C-SCAN Disk Scheduling Algorithm
    </h1>

    <h3>Input Array Elements</h3>
    <div class="queue">
        <label>Enter the queue : </label>
        <input id="array" placeholder='Eg: "82 ,170 ,43 ,140 ,24 ,16 ,190"' /></br></br>
    </div>

    <div class="queue2">
        <label class="head">Enter head : </label> <input id="inputhead" /></br></br>
    </div>

    <div class="radio">
        <input type="radio" id="rd1" name="option" value="Left">Left </input>
        <input type="radio" id="rd2" name="option" value="Right" ;>Right </input>
    </div>


    </div>




    <div class="btn">
        <button type="button" name="button" onclick="CSCAN(),CHART()" ;>
            Calculate
        </button>
    </div>



    <p id="vv"></p>


    <br>
    <div class="graph">
        <div id="myPlot" style="width:100%;max-width:700px">
        </div>
    </div>


    <script>

        function gg() {
            CSCAN();
            CHART();
        }


        let size = 8;
    let disk_size = 200;
 
    function CSCAN()
    {
        
        var type1 = document.getElementById("rd1")
            var type2 = document.getElementById("rd2")


            let arr = document.getElementById("array").value.split(",").map(Number)
            let head = Number(document.getElementById("inputhead").value)
            let direction


            if (type1.checked) {
                direction = "left"

            }

            if (type2.checked) {
                direction = "right"

            }
        
        let seek_count = 0;
        let distance, cur_track;
        let left = [], right = [];
        let seek_sequence = [];
 
        // appending end values
        // which has to be visited
        // before reversing the direction
        left.push(0);
        right.push(disk_size - 1);
 
        // tracks on the left of the
        // head will be serviced when
        // once the head comes back
        // to the beggining (left end).
        for (let i = 0; i < size; i++) {
            if (arr[i] < head)
                left.push(arr[i]);
            if (arr[i] > head)
                right.push(arr[i]);
        }
 
        // sorting left and right vectors
        left.sort(function(a, b){return a - b});
        right.sort(function(a, b){return a - b});
 
        // first service the requests
        // on the right side of the
        // head.
        for (let i = 0; i < right.length; i++)
        {
            cur_track = right[i];
             
            // appending current track to seek sequence
            seek_sequence.push(cur_track);
 
            // calculate absolute distance
            distance = Math.abs(cur_track - head);
 
            // increase the total count
            seek_count += distance;
 
            // accessed track is now new head
            head = cur_track;
        }
 
        // once reached the right end
        // jump to the beggining.
        head = 0;
 
        // adding seek count for head returning from 199 to 0
        seek_count += (disk_size - 1);
 
        // Now service the requests again
        // which are left.
        for (let i = 0; i < left.length; i++) {
            cur_track = left[i];
 
            // appending current track to seek sequence
            seek_sequence.push(cur_track);
 
            // calculate absolute distance
            distance = Math.abs(cur_track - head);
 
            // increase the total count
            seek_count += distance;
 
            // accessed track is now the new head
            head = cur_track;
        }
 
        document.getElementById("vv").innerHTML = "Total number of " +
                "seek operations = " +
                seek_count;

            CHART(seek_sequence)

    }



        function CHART(arr) {

            
            var head = document.getElementById('inputhead').value;
            var xArray = [head];
            var yArray = arr.map((elem, i)=>-i);
            yArray.push(-arr.length);
            for (var i = 0; i < arr.length; i++) {

                xArray.push(arr[i]);

            }


            var data = [{
                x: xArray,
                y: yArray,
                mode: "line"
            }];


            var layout = {
                yaxis: { range: [-10, 0], },
                xaxis: { range: [0, 200], },

                title: "C-SCAN GRAPH"
            };


            Plotly.newPlot("myPlot", data, layout);

        }



    </script>
</body>

</html>